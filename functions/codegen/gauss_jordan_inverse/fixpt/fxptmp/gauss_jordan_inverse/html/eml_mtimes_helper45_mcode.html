<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="20,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T8U3">y</span> = eml_mtimes_helper(<span class="var type1" id="S3T8U6">a</span>,<span class="var type1" id="S4T6U7">b</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%MATLAB Code Generation Library Function</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,3" id="srcline3">  3</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="20,4" id="srcline4">  4</a></span><span class="line"><span class="comment">%   Copyright 2002-2016 The MathWorks, Inc.</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,5" id="srcline5">  5</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,6" id="srcline6">  6</a></span><span class="line">coder.internal.userReadableName(<span class="string">'mtimes'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,7" id="srcline7">  7</a></span><span class="line">eml_invariant(nargin &gt; 1, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,8" id="srcline8">  8</a></span><span class="line">    <span class="string">'MATLAB:minrhs'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,9" id="srcline9">  9</a></span><span class="line"><span class="fcn" id="F46N3:B26">common_checks</span>(<span class="var type1" id="S3T8U27">a</span>, <span class="var type1" id="S4T6U28">b</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,10" id="srcline10"> 10</a></span><span class="line">eml_property(<span class="string">'associative'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,11" id="srcline11"> 11</a></span><span class="line"><span class="keyword">if</span> (eml_is_const(isscalar(<span class="var type1" id="S3T8U42">a</span>)) &amp;&amp; isscalar(<span class="var type0" id="S3T0U45">a</span>)) || <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,12" id="srcline12"> 12</a></span><span class="line">        (eml_is_const(isscalar(<span class="var type1" id="S4T6U52">b</span>)) &amp;&amp; isscalar(<span class="var type1" id="S4T6U55">b</span>))</span></span>
<span class="srcline"><span class="lineno"><a href="20,13" id="srcline13"> 13</a></span><span class="line">    eml_property(<span class="string">'commutative'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,14" id="srcline14"> 14</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,15" id="srcline15"> 15</a></span><span class="line"><span class="keyword">if</span> isinteger(<span class="var type1" id="S3T8U65">a</span>) || isinteger(<span class="var type0" id="S4T0U68">b</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,16" id="srcline16"> 16</a></span><span class="line">    <span class="fcn" id="F49N4:B71">integer_only_checks</span>(<span class="var type1" id="S3T8U72">a</span>, <span class="var type1" id="S4T6U73">b</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,17" id="srcline17"> 17</a></span><span class="line"><span class="keyword">elseif</span> (eml_is_const(isscalar(<span class="var type0" id="S3T0U82">a</span>)) &amp;&amp; isscalar(<span class="var type0" id="S3T0U85">a</span>)) || <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,18" id="srcline18"> 18</a></span><span class="line">        (eml_is_const(isscalar(<span class="var type0" id="S4T0U92">b</span>)) &amp;&amp; isscalar(<span class="var type0" id="S4T0U95">b</span>))</span></span>
<span class="srcline"><span class="lineno"><a href="20,19" id="srcline19"> 19</a></span><span class="line">    <span class="comment">% The scalar case, no dimension matching is needed.</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,20" id="srcline20"> 20</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,21" id="srcline21"> 21</a></span><span class="line">    dynamic_size_checks(<span class="var type0" id="S3T0U100">a</span>, <span class="var type0" id="S4T0U101">b</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,22" id="srcline22"> 22</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,23" id="srcline23"> 23</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T5:U12">eml_is_constant_folding</span> || <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,24" id="srcline24"> 24</a></span><span class="line">        eml_ambiguous_types || <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,25" id="srcline25"> 25</a></span><span class="line">        strcmp(coder.target(),<span class="string">'hdl'</span>) || <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,26" id="srcline26"> 26</a></span><span class="line">        <span class="mxinfo " id="T5:U13"><span class="mxinfo " id="T7:U14">size(<span class="var type1" id="S3T8U127">a</span>,2)</span> == <span class="mxinfo " id="T7:U16">1</span></span> || size(<span class="var type1" id="S4T6U133">b</span>,1) == 1 || <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,27" id="srcline27"> 27</a></span><span class="line">        ~isa(<span class="var type0" id="S3T0U139">a</span>,<span class="string">'float'</span>) || ~isa(<span class="var type0" id="S3T0U144">a</span>,class(<span class="var type0" id="S4T0U147">b</span>)) || <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,28" id="srcline28"> 28</a></span><span class="line">        isreal(<span class="var type0" id="S3T0U151">a</span>) ~= isreal(<span class="var type0" id="S4T0U154">b</span>) || <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,29" id="srcline29"> 29</a></span><span class="line">        eml_ndims(<span class="var type0" id="S3T0U158">a</span>) &gt; 2 || eml_ndims(<span class="var type0" id="S4T0U163">b</span>) &gt; 2</span></span>
<span class="srcline"><span class="lineno"><a href="20,30" id="srcline30"> 30</a></span><span class="line">    coder.inline(<span class="string">'always'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,31" id="srcline31"> 31</a></span><span class="line">    <span class="keyword">if</span> ~isa(<span class="var type1" id="S3T8U176">a</span>,class(<span class="var type1" id="S4T6U179">b</span>))</span></span>
<span class="srcline"><span class="lineno"><a href="20,32" id="srcline32"> 32</a></span><span class="line">        <span class="comment">% This optimization is required to get integer-only code with HDL</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,33" id="srcline33"> 33</a></span><span class="line">        <span class="comment">% for the case of integer-valued scalar double * integer array.</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,34" id="srcline34"> 34</a></span><span class="line">        <span class="keyword">if</span> eml_is_const(isscalar(<span class="var type0" id="S3T0U187">a</span>)) &amp;&amp; isscalar(<span class="var type0" id="S3T0U190">a</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,35" id="srcline35"> 35</a></span><span class="line">            coder.internal.prefer_const(<span class="var type0" id="S3T0U198">a</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,36" id="srcline36"> 36</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,37" id="srcline37"> 37</a></span><span class="line">        <span class="keyword">if</span> eml_is_const(isscalar(<span class="var type0" id="S4T0U206">b</span>)) &amp;&amp; isscalar(<span class="var type0" id="S4T0U209">b</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,38" id="srcline38"> 38</a></span><span class="line">            coder.internal.prefer_const(<span class="var type0" id="S4T0U217">b</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,39" id="srcline39"> 39</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,40" id="srcline40"> 40</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="20,41" id="srcline41"> 41</a></span><span class="line">        <span class="comment">% Dispatch 64-bit integer * scalar double</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,42" id="srcline42"> 42</a></span><span class="line">        <span class="keyword">if</span> isa(<span class="var type0" id="S3T0U223">a</span>, <span class="string">'int64'</span>) || isa(<span class="var type0" id="S3T0U227">a</span>, <span class="string">'uint64'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,43" id="srcline43"> 43</a></span><span class="line">            <span class="var type0" id="S2T0U231">y</span> = eml_i64dmul(<span class="var type0" id="S3T0U234">a</span>,<span class="var type0" id="S4T0U235">b</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,44" id="srcline44"> 44</a></span><span class="line">            <span class="keyword">return</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,45" id="srcline45"> 45</a></span><span class="line">        <span class="keyword">elseif</span> isa(<span class="var type0" id="S4T0U241">b</span>, <span class="string">'int64'</span>) || isa(<span class="var type0" id="S4T0U245">b</span>, <span class="string">'uint64'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,46" id="srcline46"> 46</a></span><span class="line">            <span class="var type0" id="S2T0U249">y</span> = eml_i64dmul(<span class="var type0" id="S4T0U252">b</span>,<span class="var type0" id="S3T0U253">a</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,47" id="srcline47"> 47</a></span><span class="line">            <span class="keyword">return</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,48" id="srcline48"> 48</a></span><span class="line">        <span class="keyword">end</span>        </span></span>
<span class="srcline"><span class="lineno"><a href="20,49" id="srcline49"> 49</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,50" id="srcline50"> 50</a></span><span class="line">    <span class="mxinfo " id="T8:U20"><span class="var type1" id="S2T8U257">y</span> = <span class="mxinfo " id="T8:U22">eml_mtimes(<span class="var type1" id="S3T8U260">a</span>,<span class="var type1" id="S4T6U261">b</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,51" id="srcline51"> 51</a></span><span class="line">    <span class="keyword">return</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,52" id="srcline52"> 52</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,53" id="srcline53"> 53</a></span><span class="line"><span class="var type0" id="S25T0U265">ONE</span> = ones(coder.internal.indexIntClass);</span></span>
<span class="srcline"><span class="lineno"><a href="20,54" id="srcline54"> 54</a></span><span class="line"><span class="var type0" id="S27T0U275">k</span> = cast(size(<span class="var type0" id="S3T0U280">a</span>,2),coder.internal.indexIntClass);</span></span>
<span class="srcline"><span class="lineno"><a href="20,55" id="srcline55"> 55</a></span><span class="line"><span class="var type0" id="S2T0U289">y</span> = coder.nullcopy(eml_expand(coder.internal.scalarEg(<span class="var type0" id="S3T0U302">a</span>,<span class="var type0" id="S4T0U303">b</span>),[size(<span class="var type0" id="S3T0U308">a</span>,1),size(<span class="var type0" id="S4T0U312">b</span>,2)]));</span></span>
<span class="srcline"><span class="lineno"><a href="20,56" id="srcline56"> 56</a></span><span class="line"><span class="keyword">if</span> eml_is_const(isempty(<span class="var type0" id="S2T0U321">y</span>)) &amp;&amp; isempty(<span class="var type0" id="S2T0U324">y</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,57" id="srcline57"> 57</a></span><span class="line"><span class="keyword">elseif</span> eml_is_const(isscalar(<span class="var type0" id="S2T0U331">y</span>)) &amp;&amp; isscalar(<span class="var type0" id="S2T0U334">y</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,58" id="srcline58"> 58</a></span><span class="line">    <span class="keyword">if</span> coder.internal.blas.use_refblas</span></span>
<span class="srcline"><span class="lineno"><a href="20,59" id="srcline59"> 59</a></span><span class="line">        <span class="var type0" id="S2T0U346">y</span> = eml_mtimes(<span class="var type0" id="S3T0U349">a</span>,<span class="var type0" id="S4T0U350">b</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,60" id="srcline60"> 60</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,61" id="srcline61"> 61</a></span><span class="line">        <span class="var type0" id="S2T0U354">y</span> = coder.internal.blas.xdotu(<span class="var type0" id="S27T0U363">k</span>,<span class="var type0" id="S3T0U364">a</span>,<span class="var type0" id="S25T0U365">ONE</span>,<span class="var type0" id="S25T0U366">ONE</span>,<span class="var type0" id="S4T0U367">b</span>,<span class="var type0" id="S25T0U368">ONE</span>,<span class="var type0" id="S25T0U369">ONE</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,62" id="srcline62"> 62</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,63" id="srcline63"> 63</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,64" id="srcline64"> 64</a></span><span class="line">    <span class="var type0" id="S31T0U373">m</span> = cast(size(<span class="var type0" id="S3T0U378">a</span>,1),coder.internal.indexIntClass);</span></span>
<span class="srcline"><span class="lineno"><a href="20,65" id="srcline65"> 65</a></span><span class="line">    <span class="var type0" id="S32T0U387">n</span> = cast(size(<span class="var type0" id="S4T0U392">b</span>,2),coder.internal.indexIntClass);</span></span>
<span class="srcline"><span class="lineno"><a href="20,66" id="srcline66"> 66</a></span><span class="line">    <span class="var type0" id="S33T0U401">yZERO</span> = coder.internal.scalarEg(<span class="var type0" id="S3T0U408">a</span>,<span class="var type0" id="S4T0U409">b</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,67" id="srcline67"> 67</a></span><span class="line">    <span class="var type0" id="S2T0U413">y</span>(:) = 0; <span class="comment">% g467063</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,68" id="srcline68"> 68</a></span><span class="line">    <span class="var type0" id="S2T0U418">y</span> = coder.internal.blas.xgemm(<span class="string">'N'</span>,<span class="string">'N'</span>,<span class="var type0" id="S31T0U429">m</span>,<span class="var type0" id="S32T0U430">n</span>,<span class="var type0" id="S27T0U431">k</span>,1+<span class="var type0" id="S33T0U434">yZERO</span>,<span class="var type0" id="S3T0U435">a</span>,<span class="var type0" id="S25T0U436">ONE</span>,<span class="var type0" id="S31T0U437">m</span>,<span class="var type0" id="S4T0U438">b</span>,<span class="var type0" id="S25T0U439">ONE</span>,<span class="var type0" id="S27T0U440">k</span>,<span class="var type0" id="S33T0U441">yZERO</span>,<span class="var type0" id="S2T0U442">y</span>,<span class="var type0" id="S25T0U443">ONE</span>,<span class="var type0" id="S31T0U444">m</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="20,69" id="srcline69"> 69</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="20,70" id="srcline70"> 70</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="20,71" id="srcline71"> 71</a></span><span class="line"><span class="comment">% The functions below are extracted from the main body to speed up inference.</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,72" id="srcline72"> 72</a></span><span class="line"><span class="comment">% The body of mtimes() contains eml_prefer_const so it is re-inferred very frequently.</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,73" id="srcline73"> 73</a></span><span class="line"><span class="comment">% These small functions, on the contrary, do not depend on input values,</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,74" id="srcline74"> 74</a></span><span class="line"><span class="comment">% so inference prepares them once and reuses during subsequent inference requests.</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,75" id="srcline75"> 75</a></span><span class="line"></span></span>
</pre>
<div class="dead">
<pre class="code">
<span class="srcline"><span class="lineno"><a href="20,76" id="srcline76"> 76</a></span><span class="line">function common_checks(a, b)</span></span>
<span class="srcline"><span class="lineno"><a href="20,77" id="srcline77"> 77</a></span><span class="line">coder.internal.allowEnumInputs;</span></span>
<span class="srcline"><span class="lineno"><a href="20,78" id="srcline78"> 78</a></span><span class="line">eml_invariant((coder.internal.isBuiltInNumeric(a) &amp;&amp; ~coder.isenum(a)) || islogical(a) || ischar(a), ...</span></span>
<span class="srcline"><span class="lineno"><a href="20,79" id="srcline79"> 79</a></span><span class="line">    'Coder:toolbox:unsupportedClass','mtimes',class(a));</span></span>
<span class="srcline"><span class="lineno"><a href="20,80" id="srcline80"> 80</a></span><span class="line">eml_invariant((coder.internal.isBuiltInNumeric(b) &amp;&amp; ~coder.isenum(b)) || islogical(b) || ischar(b), ...</span></span>
<span class="srcline"><span class="lineno"><a href="20,81" id="srcline81"> 81</a></span><span class="line">    'Coder:toolbox:unsupportedClass','mtimes',class(b));</span></span>
<span class="srcline"><span class="lineno"><a href="20,82" id="srcline82"> 82</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="20,83" id="srcline83"> 83</a></span><span class="line">function integer_only_checks(a, b)</span></span>
<span class="srcline"><span class="lineno"><a href="20,84" id="srcline84"> 84</a></span><span class="line">eml_invariant(isa(a,class(b)) || ...</span></span>
<span class="srcline"><span class="lineno"><a href="20,85" id="srcline85"> 85</a></span><span class="line">    (isscalar(a) &amp;&amp; isa(a,'double')) || ...</span></span>
<span class="srcline"><span class="lineno"><a href="20,86" id="srcline86"> 86</a></span><span class="line">    (isscalar(b) &amp;&amp; isa(b,'double')), ...</span></span>
<span class="srcline"><span class="lineno"><a href="20,87" id="srcline87"> 87</a></span><span class="line">    'Coder:MATLAB:mixedClasses');</span></span>
<span class="srcline"><span class="lineno"><a href="20,88" id="srcline88"> 88</a></span><span class="line">eml_invariant((coder.internal.isConst(isscalar(a)) &amp;&amp; isscalar(a)) || ...</span></span>
<span class="srcline"><span class="lineno"><a href="20,89" id="srcline89"> 89</a></span><span class="line">              (coder.internal.isConst(isscalar(b)) &amp;&amp; isscalar(b)), ...</span></span>
<span class="srcline"><span class="lineno"><a href="20,90" id="srcline90"> 90</a></span><span class="line">    'Coder:MATLAB:oneOperandMustBeScalar');</span></span>
<span class="srcline"><span class="lineno"><a href="20,91" id="srcline91"> 91</a></span><span class="line">eml_invariant(isreal(a) &amp;&amp; isreal(b), ...</span></span>
<span class="srcline"><span class="lineno"><a href="20,92" id="srcline92"> 92</a></span><span class="line">    'Coder:MATLAB:complexInts');</span></span>
<span class="srcline"><span class="lineno"><a href="20,93" id="srcline93"> 93</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="20,94" id="srcline94"> 94</a></span><span class="line">function dynamic_size_checks(a,b)</span></span>
<span class="srcline"><span class="lineno"><a href="20,95" id="srcline95"> 95</a></span><span class="line">ndimOk = ndims(a) &lt;= 2 &amp;&amp; ndims(b) &lt;= 2;</span></span>
<span class="srcline"><span class="lineno"><a href="20,96" id="srcline96"> 96</a></span><span class="line">innerDimOk = size(a,2) == size(b,1);</span></span>
<span class="srcline"><span class="lineno"><a href="20,97" id="srcline97"> 97</a></span><span class="line">if ~ndimOk || ~innerDimOk</span></span>
<span class="srcline"><span class="lineno"><a href="20,98" id="srcline98"> 98</a></span><span class="line">    if isscalar(a) || isscalar(b)</span></span>
<span class="srcline"><span class="lineno"><a href="20,99" id="srcline99"> 99</a></span><span class="line">        eml_invariant(ndimOk &amp;&amp; innerDimOk, ...</span></span>
<span class="srcline"><span class="lineno"><a href="20,100" id="srcline100">100</a></span><span class="line">            'Coder:toolbox:mtimes_noDynamicScalarExpansion');</span></span>
<span class="srcline"><span class="lineno"><a href="20,101" id="srcline101">101</a></span><span class="line">    else</span></span>
<span class="srcline"><span class="lineno"><a href="20,102" id="srcline102">102</a></span><span class="line">        eml_invariant(ndimOk, ...</span></span>
<span class="srcline"><span class="lineno"><a href="20,103" id="srcline103">103</a></span><span class="line">            'Coder:MATLAB:mtimes_inputsMustBe2D');</span></span>
<span class="srcline"><span class="lineno"><a href="20,104" id="srcline104">104</a></span><span class="line">        eml_invariant(innerDimOk, ...</span></span>
<span class="srcline"><span class="lineno"><a href="20,105" id="srcline105">105</a></span><span class="line">            'Coder:MATLAB:innerdim');</span></span>
<span class="srcline"><span class="lineno"><a href="20,106" id="srcline106">106</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="20,107" id="srcline107">107</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="20,108" id="srcline108">108</a></span><span class="line"> </span></span>
</pre>
</div>
</body>
</html>
